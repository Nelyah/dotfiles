#! /bin/bash

remote_branch="${1:-origin/master}"

merge_base=$(git merge-base "$remote_branch" HEAD)

files_modif_in_both_branches=$(comm -12 <(git diff --name-status "$merge_base" HEAD | sort) <(git diff --name-status "$merge_base" "$remote_branch" | sort) )

if [ ! -z "$files_modif_in_both_branches" ]; then
    orange="\033[0;33m"
    reset="\033[0m"
    printf "${orange}Warning: some files present on your branch have also been modified on the target branch:${reset}\n"
    printf "$files_modif_in_both_branches"
    echo ""
fi
