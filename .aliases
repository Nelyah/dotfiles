# vim: set ft=sh:

alias grep="grep --color=always"
alias egrep="egrep --color=always"

if [ "$TERM" != "dumb" ]; then
    export LS_OPTIONS="--color=always --time-style=long-iso -G"
    export LS_DIRFIRST='--group-directories-first'
fi

export LESS_TERMCAP_md="${yellow}";
alias ls="ls --color=always" 
alias ll="ls -lh $LS_OPTIONS $LS_DIRFIRST"
alias lla="ls -lha $LS_OPTIONS $LS_DIRFIRST"
alias llt="ls -lht $LS_OPTIONS"
alias lld="ls -lhd $LS_OPTIONS"
alias llad="ls -lhad $LS_OPTIONS"
alias llda="ls -lhad $LS_OPTIONS"
alias llta="ls -lht $LS_OPTIONS"
alias llat="ls -laht $LS_OPTIONS"

alias rm="rm -i"
alias rebash="source ~/.bashrc"
alias irssi@freenode="irssi -c chat.freenode.net -p 6667 -n Nelyah"
alias irc="weechat-curses"
alias bc="bc -l"
alias ecg="emacsclient --create-frame"
alias ec="emacsclient -nw"

alias test-true-colours="curl -s https://raw.githubusercontent.com/JohnMorales/dotfiles/master/colors/24-bit-color.sh | bash"
alias speedtest="wget -O /dev/null http://speed.transip.nl/100mb.bin"
alias tree="tree -A"
alias treed="tree -d"
alias tree1="tree -d -L 1"
alias tree2="tree -d -L 2"

alias list-open-ports="netstat -tulpn"

alias cpwd="pwd|tr -d "\n"|xclip" # copy pwd in clipboard
alias myip="dig +short myip.opendns.com @resolver1.opendns.com"

alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ......="cd ../../../../.."

alias awk1="awk '{print $1}'"
alias awk2="awk '{print $2}'"
alias awk3="awk '{print $3}'"
alias awk4="awk '{print $4}'"

if [ -x "$(which git)" ] ; then
    alias g="git"
    alias ga="git add"
    alias gs="git status"
    alias gc="git commit"
fi

if [ ! -x "$(which open)" ] && [ -x "$(which xdg-open)" ] ; then
    alias open="xdg-open"
fi

if [ -x "$(which nvim)" ] ; then
    alias -g vim="nvim"
    alias nvi="nvim -u NORC"
fi

if [ -x "$(which fdfind)" ] ; then
    alias fd="fdfind"
fi

if [ -x "$(which task)" ] ; then
    alias t="task"
fi

if [ -x "$(which fasd)" ] ; then
    eval "$(fasd --init auto)"

    alias z='fzf-fasd-goto-dir'
    alias a='fasd -a'        # any
    alias s='fasd -si'       # show / search / select
    alias d='fasd_cd -d'     # directory
    alias f='fasd -f'        # file
    alias sd='fasd -sid'     # interactive directory selection
    alias sf='fasd -sif'     # interactive file selection
fi

if [ -x "$(which lf)" ] ; then

    _lf-cleanup() {
        exec 3>&-
        rm -f "$FIFO_UEBERZUG"

        if [ -f "$tmp" ]; then
            dir="$(cat "$tmp")"
            rm -f "$tmp"
            [ -d "$dir" ] && [ "$dir" != "$(pwd)" ] && cd "$dir"
        fi
    }

    lf () {
        local tmp="$(mktemp)"
        trap _lf-cleanup EXIT

        if [ -n "$SSH_CLIENT" ] || [ -n "$SSH_TTY" ]; then
            command lf -last-dir-path="$tmp" "$@"
        else
            [ ! -d "$HOME/.cache/lf" ] && mkdir --parents "$HOME/.cache/lf"
            export FIFO_UEBERZUG="$HOME/.cache/lf/ueberzug-$$"
            mkfifo "$FIFO_UEBERZUG"
            ueberzug layer -s <"$FIFO_UEBERZUG" -p bash &
            exec 3>"$FIFO_UEBERZUG"
            command lf -last-dir-path="$tmp" "$@" 3>&-
        fi
    }
fi

if [ -x "$(which tmux)" ] ; then
    # Change the current directory for a tmux session, which determines
    # the starting dir for new windows/panes:
    function tmux-set-cwd {
        tmux command-prompt -I $PWD "attach -c %1"
    }
fi

if [ -x "$(which keyctl)" ]; then
    alias get-bw-session='keyctl pipe "$(keyctl request user bw_session)"'
fi
